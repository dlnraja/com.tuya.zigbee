[
  {
    "driver": "air_quality_comprehensive",
    "type": "air_quality",
    "capabilities": ["measure_pm25","measure_co2","measure_voc","measure_temperature","measure_humidity","alarm_airquality"],
    "advanced_flow_cards": {
      "actions": [
        "Start Measurement (one-shot) — Lancer mesure",
        "Set Reporting Interval (sec) — Réglage intervalle",
        "Reset Averages — Réinitialiser moyennes",
        "Calibrate CO2 Baseline — Calibrer CO2",
        "Export Snapshot — Exporter instantané"
      ],
      "triggers": [
        "PM2.5 Above X — PM2.5 > X",
        "CO2 Above X — CO2 > X",
        "VOC Above X — VOC > X",
        "AQI Category Changed — Catégorie AQI changée",
        "Air Quality Degraded (trend) — Dégradation tendance"
      ],
      "conditions": [
        "PM2.5 between X and Y — PM2.5 entre X et Y",
        "CO2 rising / falling — CO2 en hausse/baisse",
        "Humidity outside range"
      ]
    },
    "notes": "Create aggregate triggers (daily average, 1h trend). Support data tokens for flows."
  },
  {
    "driver": "blind_roller_controller",
    "type": "blind/shutter",
    "capabilities": ["windowcoverings_set","windowcoverings_state","measure_power"],
    "advanced_flow_cards": {
      "actions": [
        "Open (full)",
        "Close (full)",
        "Set Position % — Position %",
        "Stop Movement",
        "Calibrate Travel",
        "Set Speed (ms)"
      ],
      "triggers": [
        "Position Changed",
        "Fully Opened",
        "Fully Closed",
        "Obstruction Detected (overcurrent)"
      ],
      "conditions": [
        "Position > X",
        "Is Moving",
        "Motor current > threshold"
      ]
    },
    "notes": "Add auto-calibration macros and obstruction safety flows (auto-stop & reverse option)."
  },
  {
    "driver": "ceiling_fan",
    "type": "fan/light combo",
    "capabilities": ["onoff","fan_speed","light_onoff","dim","measure_power"],
    "advanced_flow_cards": {
      "actions": [
        "Turn Fan On/Off",
        "Set Fan Speed (level)",
        "Toggle Fan Direction",
        "Set Light On/Off",
        "Set Light Brightness %",
        "Sync Light & Fan Scene"
      ],
      "triggers": [
        "Fan Speed Changed",
        "Direction Changed",
        "Light On/Off",
        "Power > threshold"
      ],
      "conditions": [
        "Fan Speed > X",
        "Light is On",
        "Direction is Reversed"
      ]
    },
    "notes": "Combined controls: add group macros (fan+light) and safety stop on overload."
  },
  {
    "driver": "doorbell",
    "type": "doorbell",
    "capabilities": ["button","alarm_motion","battery","image_snapshot"],
    "advanced_flow_cards": {
      "actions": ["Simulate Ring","Send Snapshot","Mute/Unmute Chime","Start Recording"],
      "triggers": ["Doorbell Rang","Motion Detected","Person Detected"],
      "conditions": ["Is Muted","Time Window"]
    },
    "notes": "Add camera snapshot token and push with image support; rate-limit repeated rings."
  },
  {
    "driver": "lock_smart",
    "type": "lock",
    "capabilities": ["lock","lock_codes","tamper","battery","alarm"],
    "advanced_flow_cards": {
      "actions": ["Lock","Unlock","Add Code","Delete Code","Set Auto-Lock Timer","Enable/Disable Remote Unlock"],
      "triggers": ["Locked","Unlocked","Wrong Code Attempt","Tamper Detected"],
      "conditions": ["Is Locked","Code Exists"]
    },
    "notes": "Enable audit logs tokens (user, timestamp) and require confirmation for code changes."
  },
  {
    "driver": "thermostat_advanced",
    "type": "thermostat",
    "capabilities": ["target_temperature","measure_temperature","thermostat_mode","schedule"],
    "advanced_flow_cards": {
      "actions": ["Set Target Temperature","Set Mode (heat/cool/auto)","Apply Schedule","Set Eco Temp"],
      "triggers": ["Target Reached","Mode Changed","Schedule Triggered"],
      "conditions": ["Mode is","Temperature delta"]
    },
    "notes": "Support schedule import/export and multi-zone strategies."
  },
  {
    "driver": "water_valve_smart_hybrid",
    "type": "valve/hybrid",
    "capabilities": ["valve_state","onoff","switch_mode","alarm_water"],
    "advanced_flow_cards": {
      "actions": ["Open/Close","Set Mode hybrid/local","Emergency Close","Set Schedule"],
      "triggers": ["Valve State","Mode Changed","Leak"],
      "conditions": ["Mode is hybrid/local","Valve state"]
    },
    "notes": "Hybrid valve: support cloud/local fallback and emergency shutoff."
  }
]
