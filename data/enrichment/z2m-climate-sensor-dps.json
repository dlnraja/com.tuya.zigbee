{
  "_meta": {
    "source": "Zigbee2MQTT + ZHA + Hubitat drivers",
    "created": "2025-12-06",
    "purpose": "DP mappings for TS0601 climate sensors from multiple verified sources"
  },
  "devices": {
    "_TZE284_vvmbj46n": {
      "name": "Tuya TH05Z Temperature Humidity LCD Display",
      "model": "TS0601",
      "type": "climate_sensor",
      "verified_sources": [
        "https://github.com/Koenkk/zigbee2mqtt/issues/26078",
        "https://raw.githubusercontent.com/kkossev/Hubitat/main/Drivers/Tuya Temperature Humidity Illuminance LCD Display with a Clock/Tuya_Temperature_Humidity_Illuminance_LCD_Display_with_a_Clock.groovy"
      ],
      "dp_mappings": {
        "1": {
          "name": "temperature",
          "homey_capability": "measure_temperature",
          "data_type": "value",
          "divisor": 10,
          "unit": "°C",
          "note": "Temperature value divided by 10"
        },
        "2": {
          "name": "humidity",
          "homey_capability": "measure_humidity",
          "data_type": "value",
          "divisor": 1,
          "unit": "%",
          "note": "Direct percentage value"
        },
        "4": {
          "name": "battery",
          "homey_capability": "measure_battery",
          "data_type": "value",
          "divisor": 1,
          "unit": "%",
          "note": "Battery percentage - some variants may need x2 multiplier"
        },
        "9": {
          "name": "temperature_unit",
          "homey_capability": null,
          "homey_setting": "temperature_unit",
          "data_type": "enum",
          "values": {
            "0": "Celsius",
            "1": "Fahrenheit"
          }
        },
        "10": {
          "name": "max_temp_alarm",
          "homey_capability": null,
          "homey_setting": "max_temp_alarm",
          "data_type": "value",
          "divisor": 10,
          "unit": "°C",
          "range": [-20, 60]
        },
        "11": {
          "name": "min_temp_alarm",
          "homey_capability": null,
          "homey_setting": "min_temp_alarm",
          "data_type": "value",
          "divisor": 10,
          "unit": "°C",
          "range": [-20, 60]
        },
        "12": {
          "name": "max_humidity_alarm",
          "homey_capability": null,
          "homey_setting": "max_humidity_alarm",
          "data_type": "value",
          "divisor": 1,
          "unit": "%",
          "range": [0, 100]
        },
        "13": {
          "name": "min_humidity_alarm",
          "homey_capability": null,
          "homey_setting": "min_humidity_alarm",
          "data_type": "value",
          "divisor": 1,
          "unit": "%",
          "range": [0, 100]
        },
        "14": {
          "name": "temp_alarm_status",
          "homey_capability": null,
          "data_type": "enum",
          "values": {
            "0": "cancel",
            "1": "lower",
            "2": "upper"
          },
          "note": "Temperature alarm state - NO VALID HOMEY CAPABILITY"
        },
        "15": {
          "name": "humidity_alarm_status",
          "homey_capability": null,
          "data_type": "enum",
          "values": {
            "0": "cancel",
            "1": "lower",
            "2": "upper"
          },
          "note": "Humidity alarm state - NO VALID HOMEY CAPABILITY"
        },
        "17": {
          "name": "temp_report_interval",
          "homey_capability": null,
          "homey_setting": "temp_report_interval",
          "data_type": "value",
          "divisor": 1,
          "unit": "minutes",
          "range": [1, 120]
        },
        "18": {
          "name": "humidity_report_interval",
          "homey_capability": null,
          "homey_setting": "humidity_report_interval",
          "data_type": "value",
          "divisor": 1,
          "unit": "minutes",
          "range": [1, 120],
          "note": "Was missing in early Z2M versions - now supported"
        },
        "19": {
          "name": "temp_sensitivity",
          "homey_capability": null,
          "homey_setting": "temp_sensitivity",
          "data_type": "value",
          "divisor": 10,
          "unit": "°C",
          "range": [0.3, 1.0]
        },
        "20": {
          "name": "humidity_sensitivity",
          "homey_capability": null,
          "homey_setting": "humidity_sensitivity",
          "data_type": "value",
          "divisor": 1,
          "unit": "%",
          "range": [3, 10]
        }
      },
      "notes": [
        "This device has LCD display with clock",
        "Requires time sync via cluster 0x000A",
        "DP3 is NOT used by this device - it's NOT humidity!",
        "DP14/DP15 are alarm states, not battery (unlike soil sensors)",
        "Officially supported in Z2M 2.1.0+"
      ]
    },
    "_TZE200_vvmbj46n": {
      "name": "ONENUO TH05Z Temperature Humidity LCD Display",
      "model": "TS0601",
      "type": "climate_sensor",
      "note": "Same DP mapping as _TZE284_vvmbj46n",
      "see": "_TZE284_vvmbj46n"
    },
    "_TZE284_oitavov2": {
      "name": "Tuya QT-07S Soil Moisture Sensor",
      "model": "TS0601",
      "type": "soil_sensor",
      "verified_sources": [
        "https://community.home-assistant.io/t/ts0601-by-tze284-oitavov2-soil/899999",
        "https://github.com/Koenkk/zigbee2mqtt/issues/27501"
      ],
      "dp_mappings": {
        "2": {
          "name": "temperature_unit",
          "homey_capability": null,
          "homey_setting": "temperature_unit",
          "data_type": "enum",
          "values": {
            "0": "Celsius",
            "1": "Fahrenheit"
          }
        },
        "3": {
          "name": "soil_moisture",
          "homey_capability": "measure_humidity",
          "data_type": "value",
          "divisor": 1,
          "unit": "%",
          "note": "Soil moisture percentage - maps to measure_humidity"
        },
        "5": {
          "name": "temperature",
          "homey_capability": "measure_temperature",
          "data_type": "value",
          "divisor": 10,
          "unit": "°C",
          "note": "Temperature value divided by 10"
        },
        "14": {
          "name": "battery_state",
          "homey_capability": null,
          "data_type": "enum",
          "values": {
            "0": "low",
            "1": "medium",
            "2": "high"
          },
          "note": "Battery state enum - no direct Homey capability"
        },
        "15": {
          "name": "battery",
          "homey_capability": "measure_battery",
          "data_type": "value",
          "divisor": 1,
          "unit": "%",
          "note": "Battery percentage - direct value"
        },
        "105": {
          "name": "soil_moisture_alt",
          "homey_capability": "measure_humidity",
          "data_type": "value",
          "divisor": 1,
          "transform": "v > 100 ? v / 10 : v",
          "unit": "%",
          "note": "Alternative DP for some models - divide by 10 if > 100"
        }
      },
      "notes": [
        "DP3 is soil moisture, NOT air humidity!",
        "DP5 is temperature (like standard sensors)",
        "DP15 is battery % (different from standard DP4)",
        "Device only exposes linkquality, soil_moisture, battery, temperature in Z2M",
        "Open GitHub issue #27501 for full device support"
      ]
    },
    "standard_TS0601_climate": {
      "name": "Standard TS0601 Climate Sensors (most _TZE200_*, _TZE204_*)",
      "model": "TS0601",
      "type": "climate_sensor",
      "dp_mappings": {
        "1": {
          "name": "temperature",
          "homey_capability": "measure_temperature",
          "data_type": "value",
          "divisor": 10,
          "unit": "°C"
        },
        "2": {
          "name": "humidity",
          "homey_capability": "measure_humidity",
          "data_type": "value",
          "divisor": 1,
          "unit": "%"
        },
        "4": {
          "name": "battery",
          "homey_capability": "measure_battery",
          "data_type": "value",
          "divisor": 1,
          "transform": "Math.min(v * 2, 100)",
          "unit": "%",
          "note": "Battery x2 multiplier - device reports half value (ZHA quirk confirmed)"
        }
      },
      "notes": [
        "Most common DP mapping for TS0601 climate sensors",
        "DP4 battery multiplier confirmed by ZHA quirks",
        "DP3, DP5 not used by standard climate sensors"
      ]
    }
  },
  "corrections_applied": {
    "climate_sensor_device.js": {
      "WRONG": "DP3 mapped to measure_humidity for _TZE284_vvmbj46n",
      "CORRECT": "DP3 NOT used by _TZE284_vvmbj46n (that's for soil sensors)",
      "WRONG": "DP15 mapped to measure_battery for climate sensors",
      "CORRECT": "DP15 is alarm status for _TZE284_vvmbj46n, battery for soil sensors",
      "status": "Need to separate soil sensor vs climate sensor DP mappings"
    },
    "soil_sensor_device.js": {
      "CORRECT": "DP3 = soil moisture, DP5 = temp, DP15 = battery",
      "status": "Already correct as of v5.4.7"
    }
  }
}
