### ğŸ“ INSTRUCTION POUR CURSOR

Ce fichier contient un prompt complet Ã  interprÃ©ter.  
Merci de **tâ€™inspirer intÃ©gralement** de ce contenu pour **mettre Ã  jour, corriger, enrichir** et finaliser le projet `dlnraja/com.tuya.zigbee`.  
Tous les Ã©lÃ©ments doivent Ãªtre interprÃ©tÃ©s comme des tÃ¢ches Ã  exÃ©cuter **immÃ©diatement** en mode **enrichissement sans rÃ©gression**, et **sans ajout de serveur local**.

---

### ğŸ§  PROMPT CURSOR â€“ MEGA RELANCE & ENRICHISSEMENT DU PROJET `com.tuya.zigbee`

(Contenu principal du prompt comme vu prÃ©cÃ©demment, rÃ©sumÃ© ici pour clartÃ©)

...

---

### ğŸ”§ Script installateur `install.sh`

```bash
#!/bin/bash
echo "ğŸ”§ Initialisation du projet Tuya Zigbee..."

# CrÃ©ation des rÃ©pertoires standards
mkdir -p ref dashboard docs scripts workflows .github/workflows

# Attribution des droits
chmod +x scripts/*.sh

# Installation dÃ©pendances de base (facultatif selon systÃ¨me)
echo "â„¹ï¸ Assurez-vous dâ€™avoir Node.js, Git et Homey CLI installÃ©s"

echo "âœ… Projet initialisÃ© localement."
```

---

### ğŸ“ Contenu enrichi du `README.md`

# ğŸ§  Tuya Zigbee Universal (SDK3) â€“ Custom Homey App

[![License](https://img.shields.io/github/license/dlnraja/com.tuya.zigbee)](./LICENSE)
[![Deploy](https://github.com/dlnraja/com.tuya.zigbee/actions/workflows/deploy.yml/badge.svg)](https://github.com/dlnraja/com.tuya.zigbee/actions)
[![Dashboard](https://img.shields.io/badge/Dashboard-Online-blue)](https://dlnraja.github.io/com.tuya.zigbee/dashboard/)

> ğŸ¯ Objectif : Offrir une intÃ©gration Tuya Zigbee complÃ¨te, autonome, multilingue, enrichie par IA pour Homey Pro (SDK3+).

## ğŸ” FonctionnalitÃ©s

- DÃ©tection intelligente des appareils Zigbee Tuya
- RÃ©fÃ©rentiel local Zigbee (clusters, endpoints, types, specs)
- Support de modÃ¨les gÃ©nÃ©riques + templates legacy
- Workflows GitHub automatiques (build, changelog, dashboard)
- Dashboard GitHub Pages interactif

## ğŸ“Š Dashboard

ğŸ”— [AccÃ©der au Dashboard Zigbee](https://dlnraja.github.io/com.tuya.zigbee/dashboard/)

> Contient la matrice de compatibilitÃ© des devices, les clusters, endpoints et KPIs associÃ©s.

## ğŸ“ Structure

```bash
ref/                # Fichiers de specs Zigbee, clusters, endpoints
dashboard/          # Page GitHub Pages
docs/               # Documentation et changelogs
scripts/            # Scripts dâ€™automatisation
.github/workflows/  # Actions GitHub CI/CD
```

## ğŸš€ DÃ©ploiement local

```bash
npm install
homey app run
```

## ğŸ”„ Contribution

Pull requests bienvenues. Lisez les conventions de commits (`docs/CONTRIBUTING.md`) avant de proposer une PR.

## ğŸ§  Ã€ venir

- Ajout dâ€™un moteur dâ€™apprentissage pour prÃ©diction de compatibilitÃ©
- CompatibilitÃ© Homey Cloud & Homey Mini
- GÃ©nÃ©ration automatique de drivers

Â© 2025 â€“ Dylan Rajasekaram


---

### âš™ï¸ Exemple de Workflow GitHub Actions (`dashboard.yml`)

```yaml
name: ğŸ“Š Build & Deploy Dashboard

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout du repo
        uses: actions/checkout@v3

      - name: GÃ©nÃ©rer le dashboard
        run: |
          echo "ğŸ§  GÃ©nÃ©ration des donnÃ©es..."
          mkdir -p dashboard
          cp ref/*.json dashboard/
          echo "<html><body><h1>Dashboard en cours de construction</h1></body></html>" > dashboard/index.html

      - name: DÃ©ploiement GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dashboard

```

---

### ğŸ“Š DonnÃ©es KPIs des Devices Zigbee Tuya (`ref/device_kpis.csv`)

```csv
Device,Model,Manufacturer,Clusters Supported,Endpoint Count,Power Source,Status,Last Test
Zigbee Plug A,TS011F,Tuya,OnOff,1,AC mains,Stable,2025-07-27
Zigbee Sensor B,TS0201,Tuya,TemperatureMeasurement,HumidityMeasurement,1,Battery,Experimental,2025-07-25
Zigbee Dimmer C,TS0601,Tuya,LevelControl,OnOff,2,AC mains,Stable,2025-07-21
```

---

### ğŸ—‚ GÃ©nÃ©ration automatique du Changelog

ğŸ“Œ Ã€ implÃ©menter dans un workflow GitHub (`.github/workflows/changelog.yml`) :

- Ã€ chaque `push` ou `pull_request` sur `main`, gÃ©nÃ¨re/complÃ¨te le fichier `docs/CHANGELOG.md` automatiquement.
- Format standard :
  ```markdown
  ## [vX.X.X] - YYYY-MM-DD
  ### Added
  - Nouvelle fonctionnalitÃ© XYZ

  ### Fixed
  - Bug corrigÃ© dans l'appareil TS0601

  ### Changed
  - Mise Ã  jour SDK Homey 3.X.X
  ```
- Utilise une action GitHub comme [`triage-pr`](https://github.com/actions/github-script) pour extraire les messages de commit.

---

### ğŸ§° Templates automatiques pour nouveaux drivers Tuya

ğŸ“ CrÃ©e un dossier `templates/` contenant :

- `generic_driver_template.js`  
- `driver_config_template.json`  
- `capabilities_template.json`

ğŸ“Œ Ajoute un script CLI (`scripts/generate_driver.sh`) pour gÃ©nÃ©rer automatiquement la structure de driver :
```bash
#!/bin/bash
NAME=$1
cp -r templates/generic_driver_template.js drivers/$NAME/driver.js
cp templates/driver_config_template.json drivers/$NAME/driver.compose.json
echo "âœ… Nouveau driver gÃ©nÃ©rÃ© dans drivers/$NAME"
```

ğŸ” Connecte ce script Ã  un GitHub Action manuelle (`generate-driver.yml`) dÃ©clenchÃ©e par `workflow_dispatch` avec nom du device.

---

### ğŸŒ Documentation multilingue (i18n)

ğŸ“ Structure recommandÃ©e dans `docs/i18n/` :
```
docs/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ fr/
â”‚   â”‚   â””â”€â”€ index.md
â”‚   â””â”€â”€ en/
â”‚       â””â”€â”€ index.md
```

ğŸ“Œ ImplÃ©mente dans GitHub Pages :

- Ajoute un sÃ©lecteur de langue simple dans le `index.html` du dashboard
- IntÃ¨gre un script `.yml` dans `.github/workflows/docs.yml` pour valider la prÃ©sence et la cohÃ©rence des traductions

ğŸ“Œ Traduction Ã  couvrir :
- README.md
- Dashboard
- CHANGELOG.md
- Docs principaux des appareils

---

