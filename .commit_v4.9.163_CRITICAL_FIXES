fix: CRITICAL BUGS v4.9.163 - App Crash + SyntaxErrors

USER REPORT: "Rien ne s'amÃ©liore"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                   ERREURS CRITIQUES CORRIGÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ PROBLÃˆME #1: APP CRASH - L'app ne dÃ©marre pas!
Error: A Capability with ID homey:app:com.dlnraja.tuya.zigbee:fan_speed already exists

ROOT CAUSE:
- `fan_speed` dÃ©fini 2x dans app.json:
  1. Section capabilities globale (ligne 69593)
  2. capabilitiesOptions du driver hvac_air_conditioner (ligne 34855)

SOLUTION:
âœ… SupprimÃ© fan_speed de capabilitiesOptions dans driver.compose.json
âœ… ConservÃ© uniquement la dÃ©finition globale
âœ… Rebuild app.json â†’ Duplicate rÃ©solu

FICHIER:
- drivers/hvac_air_conditioner/driver.compose.json

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ PROBLÃˆME #2: SyntaxError - 2 drivers cassÃ©s!
SyntaxError: await is only valid in async functions

DRIVERS AFFECTÃ‰S:
1. climate_sensor_soil/device.js:237
2. presence_sensor_radar/device.js:257

ROOT CAUSE:
Callbacks IAS Zone pas async mais utilisent await:
```js
endpoint.clusters.iasZone.onZoneStatusChangeNotification = (data) => {
  await this.setCapabilityValue(...);  // âŒ ERROR!
}
```

SOLUTION:
âœ… AjoutÃ© `async` aux callbacks:
```js
endpoint.clusters.iasZone.onZoneStatusChangeNotification = async (data) => {
  await this.setCapabilityValue(...);  // âœ… OK!
}
```

FICHIERS MODIFIÃ‰S:
- drivers/climate_sensor_soil/device.js:224, 246
- drivers/presence_sensor_radar/device.js:254, 261

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  PROBLÃˆME #3: Climate Monitor - Pas de donnÃ©es

DIAGNOSTIC:
âœ… Initialisation correcte
âœ… Tuya cluster dÃ©tectÃ© (tuyaSpecific)
âœ… Listeners configurÃ©s
âŒ MAIS: Aucune donnÃ©e reÃ§ue!

LOGS RÃ‰VÃ‰LATEURS:
```
[TUYA] âœ… Tuya cluster FOUND!
[TUYA] âœ… Cluster name: tuyaSpecific
[TUYA] âš ï¸  Cluster ID: unknown  <-- PROBLÃˆME!
[TUYA] âœ… Initial query sent
[TUYA] âœ… Tuya DataPoint system ready!
```

ROOT CAUSE:
Le cluster tuyaSpecific n'expose PAS son ID (61184).
Les logs montrent "Cluster ID: unknown".

ANALYSE:
drivers/climate_monitor_temp_humidity/device.js utilise:
```js
const tuyaCluster = Object.values(endpoint.clusters).find(c => 
  c.name === 'tuyaSpecific' || c.id === 61184
);
```

MAIS cluster.id n'est pas disponible dans cette instance!

SOLUTION APPLIQUÃ‰E:
Le code utilise dÃ©jÃ  le cluster correctement via `cluster.name`.
Le listener est bien configurÃ©:
```js
tuyaCluster.on('response', this.handleTuyaResponse.bind(this));
tuyaCluster.on('reporting', this.handleTuyaResponse.bind(this));
tuyaCluster.on('dataReport', this.handleTuyaDataReport.bind(this));
```

DIAGNOSTIC ADDITIONNEL NÃ‰CESSAIRE:
Le device doit envoyer des DataPoints mais il ne le fait pas.
Possible causes:
1. Device en sleep (battery powered)
2. DataPoints queries timeout
3. Device needs manual trigger

INSTRUCTION UTILISATEUR:
"Appuyez sur le bouton du Climate Monitor pour forcer un report"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                          RÃ‰SUMÃ‰ FIXES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… #1 APP CRASH fan_speed duplicate â†’ FIXED
âœ… #2 SyntaxError climate_sensor_soil â†’ FIXED
âœ… #3 SyntaxError presence_sensor_radar â†’ FIXED
â³ #4 Climate Monitor no data â†’ User action needed

FILES MODIFIED:
- drivers/hvac_air_conditioner/driver.compose.json (-40 lignes)
- drivers/climate_sensor_soil/device.js (+2x async)
- drivers/presence_sensor_radar/device.js (+2x async)

IMPACT:
âœ… App dÃ©marre correctement
âœ… Drivers compilent sans erreur
âœ… Climate Monitor listeners configured
â³ Climate Monitor data: needs device trigger

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                      MESSAGE UTILISATEUR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Bonjour,

J'ai corrigÃ© les 3 erreurs CRITIQUES dans v4.9.163:

1. âœ… APP CRASH rÃ©solu (fan_speed duplicate)
2. âœ… SyntaxError climate_sensor_soil rÃ©solu
3. âœ… SyntaxError presence_sensor_radar rÃ©solu

POUR LE CLIMATE MONITOR:
Le device s'initialise correctement mais ne reÃ§oit pas de donnÃ©es.

SOLUTION: Appuyez sur le bouton du Climate Monitor pour forcer
un report de tempÃ©rature/humiditÃ©.

Installez v4.9.163 (disponible dans 10 min) et testez!

Cordialement,
Dylan

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Version: v4.9.163
Status: CRITICAL FIXES DEPLOYED
