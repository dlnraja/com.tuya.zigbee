{
  "name": {
    "en": "Cover Controller",
    "fr": "Contrôleur de Volet"
  },
  "class": "windowcoverings",
  "capabilities": [
    "windowcoverings_state",
    "windowcoverings_set",
    "windowcoverings_tilt_set",
    "measure_battery",
    "measure_luminance",
    "button",
    "dim"
  ],
  "capabilitiesOptions": {
    "windowcoverings_set": {
      "title": {
        "en": "Position"
      },
      "units": {
        "en": "%"
      }
    },
    "windowcoverings_tilt_set": {
      "title": {
        "en": "Tilt"
      },
      "units": {
        "en": "%"
      }
    },
    "measure_battery": {
      "title": {
        "en": "Battery",
        "fr": "Batterie"
      },
      "preventInsights": false
    }
  },
  "platforms": [
    "local"
  ],
  "connectivity": [
    "zigbee"
  ],
  "images": {
    "small": "drivers/curtain_motor/assets/images/small.png",
    "large": "drivers/curtain_motor/assets/images/large.png"
  },
  "zigbee": {
    "manufacturerName": [
      "Benexmart",
      "Dooya",
      "TS0105",
      "_TZ3000_1DD0D5YI",
      "_TZ3000_42HA4RSC",
      "_TZ3000_4UUAJA4A",
      "_TZ3000_5IIXZDO7",
      "_TZ3000_74HSP7QY",
      "_TZ3000_7HCGJXPC",
      "_TZ3000_8H7WGOCW",
      "_TZ3000_8KZQQZU4",
      "_TZ3000_E3VHYIRX",
      "_TZ3000_BS93NPAE",
      "_TZ3000_CTBAFVHM",
      "_TZ3000_DBPMPCO1",
      "_TZ3000_DPH3RPSS",
      "_TZ3000_EG7AWG6A",
      "_TZ3000_FCCPJZ5Z",
      "_TZ3000_FEMSAAUA",
      "_TZ3000_FVHUNHXB",
      "_TZ3000_J1XL73IW",
      "_TZ3000_JWV3CWAK",
      "_TZ3000_KE7PZJ5D",
      "_TZ3000_L6IQPH4F",
      "_TZ3000_LTIQUBUE",
      "_TZ3000_QA8S8VCA",
      "_TZ3000_QQDBCCB3",
      "_TZ3000_VD43BBFQ",
      "_TZ3000_VW8PAWXA",
      "_TZ3000_YRUUNGRL",
      "_TZ3000_ZIRYCPWS",
      "_TZ3210_778DRFDT",
      "_TZ3210_DBILPFQK",
      "_TZ3210_DWYTRMDA",
      "_TZ3210_DXROOBU3",
      "_TZ3210_FRM6149R",
      "_TZ3210_JICMOITE",
      "_TZ3210_JTIFM80B",
      "_TZ3210_OL1UHVZA",
      "_TZ3210_XBPT8EWC",
      "_TZ3210_SXTFESC6",
      "_TZ3210_XWQNG7OL",
      "_TZB000_42HA4RSC",
      "_TZE200_5NLDLE7W",
      "_TZE200_5SBEBBZS",
      "_TZE200_5ZBP6J0U",
      "_TZE200_68NVBI09",
      "_TZE200_9CAXNA4S",
      "_TZE200_9VPE3FL1",
      "_TZE200_AXGVO9JH",
      "_TZE200_BQCQQJPB",
      "_TZE200_COWVFNI3",
      "_TZE200_DQ8BU0PT",
      "_TZE200_EEGNWOYW",
      "_TZE200_FDTJUW7U",
      "_TZE200_FZO2POCS",
      "_TZE200_GAJ531W3",
      "_TZE200_ICKA1CLH",
      "_TZE200_IOSSYXRA",
      "_TZE200_JHKTTPLM",
      "_TZE200_NKOABG8W",
      "_TZE200_NV6NXO0C",
      "_TZE200_NW1R9HP6",
      "_TZE200_OL5JLKKR",
      "_TZE200_P6VZ3WZT",
      "_TZE200_PW7MJI0L",
      "_TZE200_R0JDJRVI",
      "_TZE200_RDDYVRCI",
      "_TZE200_UJ3F4WR5",
      "_TZE200_WMCDJ3AQ",
      "_TZE200_XUZCVLKU",
      "_TZE204_XUZCVLKU",
      "_TZE200_ZAH67EKD",
      "_TZE200_ZAH67EKH",
      "_TZE200_ZPZNDJEZ",
      "_TZE200_ZXXFV8WI",
      "_TZE204_57HJQELQ",
      "_TZE204_BJZROWV2",
      "_TZE204_GUVC7PDY",
      "_TZE204_LH3ARISB",
      "_TZE204_PW7MJI0L",
      "_TZE204_VVVTCEHJ",
      "_TZE204_YCKE4DEO",
      "_TZE204_ZAH67EKH",
      "_TZE204_ZPZNDJEZ",
      "_TZE204_ZUQ5XXIB",
      "_TZE284_KOXAOPNK",
      "_TZE284_UQFPH8AH",
      "_TZE600_OGYG1Y6B",
      "_TZB210_0BKZABHT",
      "_TZB210_3ZFP8MKI",
      "_TZB210_417IKXAY",
      "_TZB210_AYX58FT5",
      "_TZB210_EIWANBEB",
      "_TZB210_GJ0CCSAR",
      "_TZB210_LMQQUXUS",
      "_TZB210_RS0UFZWG",
      "_TZB210_UE01A0S2",
      "_TZB210_W9HCIX2R",
      "_TZB210_WXAZCMSH",
      "_TZB210_WY1PYU1Q",
      "_TZB210_YATKPUHA",
      "aabybja",
      "mcdj3aq",
      "mcdj3aq\\u0000",
      "owvfni3",
      "owvfni3\\u0000",
      "u1rkty3",
      "_TZE200_MLGLXWP3",
      "_TZ3210_ZANA8D08",
      "_TZE284_1FUXIHTI",
      "_TZE200_FCTWHUGX",
      "_TZE204_FCTWHUGX"
    ],
    "productId": [
      "TS0302",
      "TS0601"
    ],
    "endpoints": {
      "1": {
        "clusters": [
          1,
          258,
          61184,
          6,
          8
        ],
        "bindings": [
          1,
          258
        ]
      }
    },
    "learnmode": {
      "image": "/drivers/curtain_motor/assets/large.png",
      "instruction": {
        "en": "Follow the pairing instructions for your Smart Curtain Motor."
      }
    }
  },
  "settings": [
    {
      "id": "open_time",
      "type": "number",
      "label": {
        "en": "Open Time (seconds)",
        "fr": "Temps d'ouverture (secondes)"
      },
      "value": 0,
      "min": 0,
      "max": 120,
      "step": 1,
      "hint": {
        "en": "Time to fully open the cover (0 = auto calibration). Set this to calibrate the open position.",
        "fr": "Temps pour ouvrir complètement le volet (0 = calibration auto). Définir pour calibrer la position ouverte."
      }
    },
    {
      "id": "close_time",
      "type": "number",
      "label": {
        "en": "Close Time (seconds)",
        "fr": "Temps de fermeture (secondes)"
      },
      "value": 0,
      "min": 0,
      "max": 120,
      "step": 1,
      "hint": {
        "en": "Time to fully close the cover (0 = auto calibration). Set this to calibrate the close position.",
        "fr": "Temps pour fermer complètement le volet (0 = calibration auto). Définir pour calibrer la position fermée."
      }
    },
    {
      "id": "reverse_direction",
      "type": "checkbox",
      "label": {
        "en": "Reverse Direction",
        "fr": "Inverser Direction"
      },
      "value": false,
      "hint": {
        "en": "Swap open/close direction if your curtain moves the wrong way",
        "fr": "Inverser la direction si votre rideau se déplace dans le mauvais sens"
      }
    },
    {
      "id": "power_source",
      "type": "dropdown",
      "label": {
        "en": "Power Source",
        "fr": "Source d'Alimentation"
      },
      "value": "auto",
      "values": [
        {
          "id": "auto",
          "label": {
            "en": "Auto Detect",
            "fr": "Détection Automatique"
          }
        },
        {
          "id": "ac",
          "label": {
            "en": "AC Powered",
            "fr": "Alimentation Secteur"
          }
        },
        {
          "id": "dc",
          "label": {
            "en": "DC Powered",
            "fr": "Alimentation DC"
          }
        },
        {
          "id": "battery",
          "label": {
            "en": "Battery Powered",
            "fr": "Sur Batterie"
          }
        }
      ],
      "hint": {
        "en": "Select power source manually or use auto-detection",
        "fr": "Sélectionnez la source d'alimentation manuellement ou utilisez la détection automatique"
      }
    },
    {
      "id": "battery_type",
      "type": "dropdown",
      "label": {
        "en": "Battery Type",
        "fr": "Type de Batterie"
      },
      "value": "auto",
      "values": [
        {
          "id": "auto",
          "label": {
            "en": "Auto Detect",
            "fr": "Détection Automatique"
          }
        },
        {
          "id": "CR2032",
          "label": {
            "en": "CR2032 (3V Button Cell)",
            "fr": "CR2032 (Pile Bouton 3V)"
          }
        },
        {
          "id": "CR2450",
          "label": {
            "en": "CR2450 (3V Button Cell)",
            "fr": "CR2450 (Pile Bouton 3V)"
          }
        },
        {
          "id": "AAA",
          "label": {
            "en": "AAA (1.5V)",
            "fr": "AAA (1.5V)"
          }
        },
        {
          "id": "AA",
          "label": {
            "en": "AA (1.5V)",
            "fr": "AA (1.5V)"
          }
        },
        {
          "id": "CR123A",
          "label": {
            "en": "CR123A (3V)",
            "fr": "CR123A (3V)"
          }
        }
      ],
      "hint": {
        "en": "Select battery type manually or use auto-detection based on voltage",
        "fr": "Sélectionnez le type de batterie manuellement ou utilisez la détection automatique basée sur la tension"
      }
    },
    {
      "id": "battery_low_threshold",
      "type": "number",
      "label": {
        "en": "Low Battery Threshold (%)",
        "fr": "Seuil Batterie Faible (%)"
      },
      "value": 20,
      "min": 0,
      "max": 50,
      "step": 5,
      "hint": {
        "en": "Trigger low battery warning when below this percentage",
        "fr": "Déclencher l'alerte batterie faible en dessous de ce pourcentage"
      }
    },
    {
      "id": "battery_critical_threshold",
      "type": "number",
      "label": {
        "en": "Critical Battery Threshold (%)",
        "fr": "Seuil Batterie Critique (%)"
      },
      "value": 10,
      "min": 0,
      "max": 30,
      "step": 5,
      "hint": {
        "en": "Trigger critical battery warning when below this percentage",
        "fr": "Déclencher l'alerte batterie critique en dessous de ce pourcentage"
      }
    },
    {
      "id": "enable_battery_notifications",
      "type": "checkbox",
      "label": {
        "en": "Enable Battery Notifications",
        "fr": "Activer Notifications Batterie"
      },
      "value": true,
      "hint": {
        "en": "Send flow notifications for battery events",
        "fr": "Envoyer des notifications de flow pour les événements de batterie"
      }
    },
    {
      "id": "battery_report_interval",
      "type": "number",
      "label": {
        "en": "Battery Report Interval (hours)",
        "fr": "Intervalle Rapport Batterie (heures)"
      },
      "value": 24,
      "min": 1,
      "max": 168,
      "step": 1,
      "hint": {
        "en": "How often to request battery status updates",
        "fr": "Fréquence de demande des mises à jour d'état de batterie"
      }
    },
    {
      "id": "optimization_mode",
      "type": "dropdown",
      "label": {
        "en": "Energy Optimization Mode",
        "fr": "Mode Optimisation Énergétique"
      },
      "value": "balanced",
      "values": [
        {
          "id": "performance",
          "label": {
            "en": "Performance (More responsive)",
            "fr": "Performance (Plus réactif)"
          }
        },
        {
          "id": "balanced",
          "label": {
            "en": "Balanced",
            "fr": "Équilibré"
          }
        },
        {
          "id": "power_saving",
          "label": {
            "en": "Power Saving (Longer battery)",
            "fr": "Économie d'énergie (Batterie plus longue)"
          }
        }
      ],
      "hint": {
        "en": "Balance between responsiveness and battery life",
        "fr": "Équilibre entre réactivité et durée de vie de la batterie"
      }
    },
    {
      "id": "show_voltage",
      "type": "checkbox",
      "label": {
        "en": "Show Battery Voltage",
        "fr": "Afficher Tension Batterie"
      },
      "value": false,
      "hint": {
        "en": "Display raw battery voltage in device settings",
        "fr": "Afficher la tension brute de la batterie dans les paramètres du périphérique"
      }
    },
    {
      "id": "enable_power_estimation",
      "type": "checkbox",
      "label": {
        "en": "Enable Power Estimation",
        "fr": "Activer Estimation Puissance"
      },
      "value": true,
      "hint": {
        "en": "Estimate power consumption when real measurement is not available (AC/DC devices only)",
        "fr": "Estimer la consommation quand la mesure réelle n'est pas disponible (appareils AC/DC seulement)"
      }
    }
  ],
  "energy": {
    "batteries": [
      "CR2032",
      "CR2450",
      "AAA",
      "AA",
      "CR123A"
    ],
    "approximation": {
      "usageConstant": 0.5
    }
  },
  "id": "curtain_motor",
  "learnmode": {
    "image": "./assets/learnmode.svg",
    "instruction": {
      "en": "Press and hold the reset button for 5 seconds until the LED blinks",
      "fr": "Appuyez et maintenez le bouton reset pendant 5 secondes jusqu'à ce que la LED clignote"
    }
  },
  "flow": {
    "triggers": [
      {
        "id": "cover_position_changed",
        "title": {
          "en": "Position changed",
          "fr": "Position changée"
        },
        "tokens": [
          {
            "name": "position",
            "type": "number",
            "title": {
              "en": "Position (%)",
              "fr": "Position (%)"
            },
            "example": 50
          }
        ]
      },
      {
        "id": "cover_opened",
        "title": {
          "en": "Cover fully opened",
          "fr": "Volet complètement ouvert"
        }
      },
      {
        "id": "cover_closed",
        "title": {
          "en": "Cover fully closed",
          "fr": "Volet complètement fermé"
        }
      },
      {
        "id": "cover_stopped",
        "title": {
          "en": "Cover stopped",
          "fr": "Volet arrêté"
        }
      },
      {
        "id": "button_pressed",
        "title": {
          "en": "Button Pressed",
          "fr": "Button Pressed"
        }
      }
    ],
    "conditions": [
      {
        "id": "cover_position_is",
        "title": {
          "en": "Position is !{{above|below}} threshold",
          "fr": "Position est !{{au-dessus|en-dessous}} du seuil"
        },
        "titleFormatted": {
          "en": "Position is !{{above|below}} [[threshold]] %",
          "fr": "Position est !{{au-dessus|en-dessous de}} [[threshold]] %"
        },
        "args": [
          {
            "name": "threshold",
            "type": "number",
            "min": 0,
            "max": 100,
            "step": 5,
            "placeholder": {
              "en": "50"
            }
          }
        ]
      },
      {
        "id": "cover_is_open",
        "title": {
          "en": "Cover !{{is|isn't}} fully open",
          "fr": "Volet !{{est|n'est pas}} complètement ouvert"
        }
      }
    ],
    "actions": [
      {
        "id": "cover_set_position",
        "title": {
          "en": "Set cover position",
          "fr": "Définir position volet"
        },
        "titleFormatted": {
          "en": "Set position to [[position]] %",
          "fr": "Définir position à [[position]] %"
        },
        "args": [
          {
            "type": "range",
            "name": "position",
            "title": {
              "en": "Position",
              "fr": "Position"
            },
            "min": 0,
            "max": 100,
            "step": 5,
            "label": "%"
          }
        ]
      },
      {
        "id": "cover_stop",
        "title": {
          "en": "Stop cover",
          "fr": "Arrêter volet"
        }
      },
      {
        "id": "curtain_calibrate",
        "title": {
          "en": "Calibrate curtain motor",
          "nl": "Kalibreer gordijnmotor"
        },
        "titleFormatted": {
          "en": "Calibrate [[device]]",
          "nl": "Kalibreer [[device]]"
        },
        "hint": {
          "en": "Run full open/close cycle for position calibration",
          "nl": "Voer volledige open/sluit cyclus uit voor positie kalibratie"
        }
      },
      {
        "id": "curtain_reset_position",
        "title": {
          "en": "Reset position to 0%",
          "nl": "Reset positie naar 0%"
        },
        "titleFormatted": {
          "en": "Reset [[device]] position",
          "nl": "Reset [[device]] positie"
        },
        "hint": {
          "en": "Reset current position to fully closed",
          "nl": "Reset huidige positie naar volledig gesloten"
        }
      }
    ]
  },
  "metadata": {
    "app": {
      "id": "com.dlnraja.tuya.zigbee",
      "name": "Universal Tuya Zigbee",
      "version": "4.1.3",
      "api": {
        "min": 3,
        "max": 3
      }
    }
  },
  "pair": [
    {
      "id": "list_devices",
      "template": "list_devices",
      "navigation": {
        "next": "select_driver"
      }
    },
    {
      "id": "select_driver",
      "navigation": {
        "next": "add_devices"
      }
    },
    {
      "id": "add_devices",
      "template": "add_devices"
    }
  ]
}
