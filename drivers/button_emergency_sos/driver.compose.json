{
  "name": {
    "en": "Sos Emergency Button",
    "fr": "Sos Emergency Button",
    "nl": "SOS Noodknop",
    "de": "SOS Notfalltaste"
  },
  "class": "sensor",
  "capabilities": [
    "alarm_generic",
    "measure_battery"
  ],
  "capabilitiesOptions": {
    "alarm_generic": {
      "title": {
        "en": "SOS Alert",
        "fr": "Alerte SOS"
      },
      "insightsTitleTrue": {
        "en": "SOS pressed",
        "fr": "SOS appuy√©"
      },
      "insightsTitleFalse": {
        "en": "SOS reset",
        "fr": "SOS r√©initialis√©"
      }
    }
  },
  "energy": {
    "batteries": [
      "CR2032",
      "CR2450"
    ]
  },
  "zigbee": {
    "manufacturerName": [
      "_TYZB01_trqoesc6",
      "_TZ3000_0dumfk2z",
      "_TZ3000_2izubafb",
      "_TZ3000_4fsgukof",
      "_TZ3000_8xz0pyqy",
      "_TZ3000_c0gf6xd7",
      "_TZ3000_el5kt5im",
      "_TZ3000_eo3dttwe",
      "_TZ3000_fsiepnrh",
      "_TZ3000_fywhzh9u",
      "_TZ3000_gjnozsaz",
      "_TZ3000_gnwgnwvq",
      "_TZ3000_graty6sj",
      "_TZ3000_imkwgfwh",
      "_TZ3000_is27vzco",
      "_TZ3000_iystcadi",
      "_TZ3000_n0h1dr7u",
      "_TZ3000_p3fph1go",
      "_TZ3000_p6ju8myv",
      "_TZ3000_peszejy7",
      "_TZ3000_pkfazisv",
      "_TZ3000_qjhwtnkf",
      "_TZ3000_rmhkdz0l",
      "_TZ3000_ssp0maqm",
      "_TZ3000_tj4pwzzm",
      "_TZ3000_ug1vtuzn",
      "_TZ3000_wr2ucaj9",
      "_TZ3000_zpjuqnco",
      "_TZ3000_zsh6uat3",
      "_TZE200_0ble7ow3",
      "_TZE200_kzm5w4iz",
      "_TZE284_3qhgndv6",
      "ORVIBO",
      "Heiman",
      "HEIMAN",
      "Woox",
      "WOOX"
    ],
    "productId": [
      "TS0215",
      "TS0215A",
      "TS0218",
      "TS0601"
    ],
    "endpoints": {
      "1": {
        "clusters": [
          0,
          1,
          1280,
          1281,
          61184
        ],
        "bindings": [1, 1280, 1281]
      }
    },
    "learnmode": {
      "image": "/drivers/button_emergency_sos/assets/learnmode.svg",
      "instruction": {
        "en": "Press and hold the pairing button for 5 seconds until the LED flashes.",
        "fr": "Appuyez et maintenez le bouton d'appairage pendant 5 secondes jusqu'√† ce que la LED clignote."
      }
    }
  },
  "settings": [
    {
      "type": "group",
      "label": {
        "en": "üîß Maintenance",
        "fr": "üîß Maintenance"
      },
      "children": [
        {
          "id": "refresh_battery",
          "type": "checkbox",
          "label": {
            "en": "Force Battery Read (toggle to trigger)",
            "fr": "Forcer Lecture Batterie (basculer pour d√©clencher)"
          },
          "value": false,
          "hint": {
            "en": "Toggle this setting to force a battery reading. The device must be awake (press SOS button first).",
            "fr": "Basculer ce param√®tre pour forcer une lecture de batterie. L'appareil doit √™tre √©veill√© (appuyez d'abord sur le bouton SOS)."
          }
        },
        {
          "id": "re_enroll",
          "type": "checkbox",
          "label": {
            "en": "Re-enroll IAS Zone (toggle to trigger)",
            "fr": "R√©-inscrire IAS Zone (basculer pour d√©clencher)"
          },
          "value": false,
          "hint": {
            "en": "Toggle this setting to re-enroll the device. Press SOS button first to wake device.",
            "fr": "Basculer ce param√®tre pour r√©-inscrire l'appareil. Appuyez d'abord sur le bouton SOS pour r√©veiller l'appareil."
          }
        }
      ]
    },
    {
      "id": "power_source",
      "type": "dropdown",
      "label": {
        "en": "Power Source",
        "fr": "Source d'Alimentation"
      },
      "value": "auto",
      "values": [
        {
          "id": "auto",
          "label": {
            "en": "Auto Detect",
            "fr": "D√©tection Automatique"
          }
        },
        {
          "id": "ac",
          "label": {
            "en": "AC Powered",
            "fr": "Alimentation Secteur"
          }
        },
        {
          "id": "dc",
          "label": {
            "en": "DC Powered",
            "fr": "Alimentation DC"
          }
        },
        {
          "id": "battery",
          "label": {
            "en": "Battery Powered",
            "fr": "Sur Batterie"
          }
        }
      ],
      "hint": {
        "en": "Select power source manually or use auto-detection",
        "fr": "S√©lectionnez la source d'alimentation manuellement ou utilisez la d√©tection automatique"
      }
    },
    {
      "id": "battery_type",
      "type": "dropdown",
      "label": {
        "en": "Battery Type",
        "fr": "Type de Batterie"
      },
      "value": "auto",
      "values": [
        {
          "id": "auto",
          "label": {
            "en": "Auto Detect",
            "fr": "D√©tection Automatique"
          }
        },
        {
          "id": "CR2032",
          "label": {
            "en": "CR2032",
            "fr": "CR2032 (Pile Bouton 3V)"
          }
        },
        {
          "id": "CR2450",
          "label": {
            "en": "CR2450",
            "fr": "CR2450 (Pile Bouton 3V)"
          }
        },
        {
          "id": "AAA",
          "label": {
            "en": "AAA",
            "fr": "AAA"
          }
        },
        {
          "id": "AA",
          "label": {
            "en": "AA",
            "fr": "AA"
          }
        },
        {
          "id": "CR123A",
          "label": {
            "en": "CR123A",
            "fr": "CR123A"
          }
        }
      ],
      "hint": {
        "en": "Select battery type manually or use auto-detection based on voltage",
        "fr": "S√©lectionnez le type de batterie manuellement ou utilisez la d√©tection automatique bas√©e sur la tension"
      }
    },
    {
      "id": "battery_low_threshold",
      "type": "number",
      "label": {
        "en": "Low Battery Threshold",
        "fr": "Seuil Batterie Faible (%)"
      },
      "value": 20,
      "min": 0,
      "max": 50,
      "step": 5,
      "hint": {
        "en": "Trigger low battery warning when below this percentage",
        "fr": "D√©clencher l'alerte batterie faible en dessous de ce pourcentage"
      }
    },
    {
      "id": "battery_critical_threshold",
      "type": "number",
      "label": {
        "en": "Critical Battery Threshold",
        "fr": "Seuil Batterie Critique (%)"
      },
      "value": 10,
      "min": 0,
      "max": 30,
      "step": 5,
      "hint": {
        "en": "Trigger critical battery warning when below this percentage",
        "fr": "D√©clencher l'alerte batterie critique en dessous de ce pourcentage"
      }
    },
    {
      "id": "enable_battery_notifications",
      "type": "checkbox",
      "label": {
        "en": "Enable Battery Notifications",
        "fr": "Activer Notifications Batterie"
      },
      "value": true,
      "hint": {
        "en": "Send flow notifications for battery events",
        "fr": "Envoyer des notifications de flow pour les √©v√©nements de batterie"
      }
    },
    {
      "id": "battery_report_interval",
      "type": "number",
      "label": {
        "en": "Battery Report Interval",
        "fr": "Intervalle Rapport Batterie (heures)"
      },
      "value": 24,
      "min": 1,
      "max": 168,
      "step": 1,
      "hint": {
        "en": "How often to request battery status updates",
        "fr": "Fr√©quence de demande des mises √† jour d'√©tat de batterie"
      }
    },
    {
      "id": "optimization_mode",
      "type": "dropdown",
      "label": {
        "en": "Energy Optimization Mode",
        "fr": "Mode Optimisation √ânerg√©tique"
      },
      "value": "balanced",
      "values": [
        {
          "id": "performance",
          "label": {
            "en": "Performance (More responsive)",
            "fr": "Performance (Plus r√©actif)"
          }
        },
        {
          "id": "balanced",
          "label": {
            "en": "Balanced",
            "fr": "√âquilibr√©"
          }
        },
        {
          "id": "power_saving",
          "label": {
            "en": "Power Saving (Longer battery)",
            "fr": "√âconomie d'√©nergie (Batterie plus longue)"
          }
        }
      ],
      "hint": {
        "en": "Balance between responsiveness and battery life",
        "fr": "√âquilibre entre r√©activit√© et dur√©e de vie de la batterie"
      }
    },
    {
      "id": "show_voltage",
      "type": "checkbox",
      "label": {
        "en": "Show Battery Voltage",
        "fr": "Afficher Tension Batterie"
      },
      "value": false,
      "hint": {
        "en": "Display raw battery voltage in device settings",
        "fr": "Afficher la tension brute de la batterie dans les param√®tres du p√©riph√©rique"
      }
    },
    {
      "id": "enable_power_estimation",
      "type": "checkbox",
      "label": {
        "en": "Enable Power Estimation",
        "fr": "Activer Estimation Puissance"
      },
      "value": true,
      "hint": {
        "en": "Estimate power consumption when real measurement is not available (AC/DC devices only)",
        "fr": "Estimer la consommation quand la mesure r√©elle n'est pas disponible (appareils AC/DC seulement)"
      }
    },
    {
      "id": "tuya_dp_configuration",
      "type": "label",
      "label": {
        "en": "Tuya Datapoint Configuration",
        "fr": "Configuration Tuya Datapoint"
      },
      "value": "DP1/DP14: SOS (bool)\nDP4/DP15: Battery %\nDP101: Context (bool=SOS, num=battery)"
    },
    {
      "id": "dp_debug_mode",
      "type": "checkbox",
      "label": {
        "en": "DP Debug Mode",
        "fr": "Mode Debug DP"
      },
      "value": false,
      "hint": {
        "en": "Log all Tuya DP data for troubleshooting",
        "fr": "Logger toutes les donn√©es Tuya DP pour diagnostic"
      }
    },
    {
      "id": "enable_time_sync",
      "type": "checkbox",
      "label": {
        "en": "Enable Time Sync",
        "fr": "Activer Synchro Heure"
      },
      "value": true,
      "hint": {
        "en": "Sync device time with Homey",
        "fr": "Synchroniser l'heure du device avec Homey"
      }
    }
  ],
  "images": {
    "small": "drivers/button_emergency_sos/assets/images/small.png",
    "large": "drivers/button_emergency_sos/assets/images/large.png",
    "xlarge": "drivers/button_emergency_sos/assets/images/xlarge.png"
  },
  "id": "button_emergency_sos",
  "platforms": [
    "local"
  ],
  "connectivity": [
    "zigbee"
  ],
  "pair": [
    {
      "id": "list_devices",
      "template": "list_devices",
      "navigation": {
        "next": "select_driver"
      }
    },
    {
      "id": "select_driver",
      "navigation": {
        "next": "add_devices"
      }
    },
    {
      "id": "add_devices",
      "template": "add_devices"
    }
  ]
}