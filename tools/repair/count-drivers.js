const fs = require("fs"); const path = require("path"); console.log("üöÄ R√©cup√©ration massive des drivers..."); const catalogDirs = ["light", "switch", "sensor-contact", "sensor-motion", "sensor-temp", "sensor-humidity", "sensor-gas", "sensor-smoke", "sensor-vibration", "sensor-water", "cover", "fan", "heater", "lock", "ac", "other"]; let totalDrivers = 0; catalogDirs.forEach(cat => { const catPath = `catalog/${cat}`; if (fs.existsSync(catPath)) { const tuyaPath = `${catPath}/tuya`; if (fs.existsSync(tuyaPath)) { const drivers = fs.readdirSync(tuyaPath, { withFileTypes: true }).filter(d => d.isDirectory()).map(d => d.name); console.log(`${cat}: ${drivers.length} drivers`); totalDrivers += drivers.length; } } }); console.log(`Total: ${totalDrivers} drivers trouv√©s`); console.log("::END::DRIVER_COUNT::OK");
