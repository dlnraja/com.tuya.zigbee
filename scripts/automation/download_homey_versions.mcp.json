{
  "name": "download_homey_app_versions",
  "version": "1.0.0",
  "description": "Automate Homey Developer Dashboard to download all app source zips for com.dlnraja.tuya.zigbee",
  "actions": [
    {
      "type": "goto",
      "url": "https://developer.homey.app/"
    },
    {
      "type": "waitForSelector",
      "selector": "input[name='email'], a[href*='/apps']",
      "timeout": 15000
    },
    {
      "type": "ensureLoggedIn",
      "assertSelector": "a[href*='/apps']",
      "message": "Please log in manually in the browser window before continuing."
    },
    {
      "type": "goto",
      "url": "https://developer.homey.app/apps/com.dlnraja.tuya.zigbee/versions"
    },
    {
      "type": "waitForSelector",
      "selector": "button, a",
      "timeout": 15000
    },
    {
      "type": "evaluate",
      "script": "Array.from(document.querySelectorAll('a, button')).filter(n=>/Download source/i.test(n.innerText)).map(n=>n.click())"
    },
    {
      "type": "wait",
      "ms": 5000
    },
    {
      "type": "log",
      "message": "âœ… All versions triggered for download. Check your browser's Downloads folder (D:\\Download\\)."
    }
  ]
}
