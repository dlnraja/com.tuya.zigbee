Write-Host "Converting clusters..."; $content = Get-Content "app.json" -Raw; $app = $content | ConvertFrom-Json; $count = 0; foreach($driver in $app.drivers) { if($driver.zigbee.endpoints."1".clusters) { $driver.zigbee.endpoints."1".clusters = $driver.zigbee.endpoints."1".clusters | ForEach-Object { if($_ -eq "genBasic") { 0 } elseif($_ -eq "genPowerCfg") { 1 } elseif($_ -eq "genOnOff") { 6 } elseif($_ -eq "genLevelCtrl") { 8 } elseif($_ -eq "genScenes") { 5 } elseif($_ -eq "genGroups") { 4 } elseif($_ -eq "genAlarms") { 9 } elseif($_ -eq "genTime") { 10 } elseif($_ -eq "genElectricalMeasurement") { 2820 } elseif($_ -eq "genMetering") { 1794 } elseif($_ -eq "genTemperatureMeasurement") { 1026 } elseif($_ -eq "genHumidityMeasurement") { 1029 } elseif($_ -eq "genOccupancySensing") { 1030 } elseif($_ -eq "genColorCtrl") { 768 } elseif($_ -eq "genFanControl") { 514 } elseif($_ -eq "genDoorLock") { 257 } elseif($_ -eq "genThermostat") { 513 } elseif($_ -eq "genWindowCovering") { 258 } else { $_ } }; $count++; Write-Host "Converted $($driver.id)" } }; $app | ConvertTo-Json -Depth 10 | Set-Content "app.json"; Write-Host "Total: $count drivers converted"
