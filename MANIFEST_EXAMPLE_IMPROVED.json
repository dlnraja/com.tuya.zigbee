{
  "_comment": "Example: USB Outlet 2-Port - IMPROVED MANIFEST",
  
  "name": {
    "en": "USB Outlet - 2 Ports",
    "fr": "Prise USB - 2 Ports"
  },
  
  "class": "socket",
  
  "capabilities": [
    "onoff",
    "led_mode",
    "measure_voltage",
    "measure_current"
  ],
  
  "capabilitiesOptions": {
    "onoff": {
      "title": { "en": "Port 1" }
    }
  },
  
  "zigbee": {
    "_comment": "CRITICAL: manufacturerName + productId pour éviter collisions",
    
    "manufacturerName": [
      "_TZ3000_1obwwnmq",
      "_TZ3000_w0qqde0g",
      "_TZ3000_gjnozsaz",
      "_TZ3000_8gs8h2e4"
    ],
    
    "productId": ["TS011F"],
    
    "_comment": "Endpoints MUST be defined for SDK3",
    "endpoints": {
      "1": {
        "clusters": [0, 3, 4, 5, 6, 1794, 2820],
        "bindings": [6, 1794, 2820]
      },
      "2": {
        "clusters": [6],
        "bindings": [6]
      }
    },
    
    "_comment": "Sub-Devices = 2 Homey devices auto-created",
    "devices": {
      "port2": {
        "class": "socket",
        "capabilities": ["onoff"],
        "name": { "en": "USB Port 2" },
        "settings": []
      }
    },
    
    "learnmode": {
      "image": "/drivers/usb_outlet_2port/assets/learnmode.svg",
      "instruction": {
        "en": "Press and hold the power button for 5 seconds until the LED blinks"
      }
    }
  },
  
  "images": {
    "small": "drivers/usb_outlet_2port/assets/images/small.png",
    "large": "drivers/usb_outlet_2port/assets/images/large.png"
  },
  
  "platforms": ["local"],
  "connectivity": ["zigbee"],
  
  "_notes": {
    "improvements": [
      "✅ manufacturerName array prevents TS011F collisions",
      "✅ Sub-Devices creates 2 Homey devices automatically",
      "✅ Endpoints defined (SDK3 requirement)",
      "✅ Clear capability titles",
      "✅ No sub-capabilities (onoff.usb2) - using Sub-Devices instead"
    ],
    "testing": [
      "1. Re-pair device after manifest update",
      "2. Verify 2 devices appear in Homey",
      "3. Test Port 1 on/off",
      "4. Test Port 2 on/off (separate device)",
      "5. Verify voltage/current displayed",
      "6. Verify NO battery indicator"
    ]
  }
}
