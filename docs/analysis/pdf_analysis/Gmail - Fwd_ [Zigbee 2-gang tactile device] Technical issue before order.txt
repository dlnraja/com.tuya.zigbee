Dylan Rajasekaram <senetmarne@gmail.com>
Fwd: [Zigbee 2-gang tactile device] T echnical issue before order
23 messages
Lo√Øc Salmona <loic.salmona@gmail.com> 1 novembre 2025 √† 23:39
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
FYI
---------- Forwarded message ---------
From: Lo√Øc Salmona  <loic.salmona@gmail.com >
Date: Sat, Nov 1, 2025 at 1 1:23‚ÄâPM
Subject: [Zigbee 2-gang tactile device] Technical issue before order
To: <shopify@bseed.com >
Hello,
I would like to order your multi-gang tactile zigbee devices for my house.
However , ahead of this order , I am trying to check how I can manage these devices with my homey pro local zigbee
gateway .
I tried with the 2-gang zigbee device.
So far , I can read each gang status. 
But when I trigger one gang (1 or 2) on homey through endpoint[1 or 2].clusters.onof f , both  switches are activated .
I am not able to command only one gang with commands like setOn(), setOf f(), toggle().
Is there any technical specification I should know to fix this?
If I cannot fix this, it is a no go.
Thanks a lot for your help
Regards
Lo√Øc S.
Dylan RAJASEKARAM <dylan.rajasekaram@gmail.com> 1 novembre 2025 √† 23:42
√Ä : loic.salmona@gmail.com
üëç
Dylan a r√©agi depuis Gmail
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 2 novembre 2025 √† 00:06
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
D'apr√®s ce que j'observe apr√®s investigation. C'est bien un probl√®me de firmware et non de code car avec les modifs
de codes que je suis entrain de tester √ßa sera pareil. Il faudrait voir le comportement avec une box tuya et voir ce qui
se passe. 
Cdt.
0695501021 ;) 
Le sam. 1 nov . 2025, 23:40, Lo√Øc Salmona < loic.salmona@gmail.com > a √©crit :
[Texte des messages pr√©c√©dents masqu√©]
Lo√Øc Salmona <loic.salmona@gmail.com> 2 novembre 2025 √† 00:25

√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
Ok merci. Je vais voir ce que Bseed me r√©pond.
Sinon tu te sens de snif fer la gateway Tuya si je te la paie?
Je note le t√©l√©phone si besoin merci !
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 2 novembre 2025 √† 00:47
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
je vais chercher dans mon stock, il doit surement y en tra√Æner un ( model lidl ou aliexpress ) mais le mieux est
d'attendre une r√©ponse de bseed , vue que c'est une soci√©t√© chinoise derriere ils devraient logement r√©pondre plus
rapidement par whatsapp.
[Texte des messages pr√©c√©dents masqu√©]
Lo√Øc Salmona <loic.salmona@gmail.com> 2 novembre 2025 √† 14:04
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
Sinon tu as d√©j√† lu cette page?
https://developer .tuya.com/en/ docs/connect-subdevices-to- gateways/tuya-zigbee-multiple- switch-access-standard?id=
K9ik6zvnqr09m
√áa manque cruellement d‚Äôexemple, je n‚Äôai pas encore bien capt√© le fonctionnement.
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 2 novembre 2025 √† 14:31
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
tuya utulsie les dp se sont des daya pints par dessus des clsuter , c'est une surcoihe d'implementatipn sur le zigbee
stadard , j'ao crr√©er un parseur dp dasn le projet mais c'est une galiere√® car les datta peuvent etre envoy√© en stroing
ou en raw .
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 2 novembre 2025 √† 14:39
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
Tuya utilise des DP  (Data Points), qui constituent une surcouche propri√©taire au-dessus du standard Zigbee.
Concr√®tement, m√™me si l‚Äôappareil tourne sur des clusters Zigbee classiques, Tuya encapsule tout dans des DP , ce qui
d√©tourne le fonctionnement normal et complique √©norm√©ment l‚Äôint√©gration.
Dans mon projet dlnraja/com.tuya.zigbee, j‚Äôai impl√©ment√© un parseur DP  g√©n√©rique capable de d√©coder ces trames. Il
g√®re notamment :
la lecture et l‚Äô√©criture de DP ,
les dif f√©rents types de payloads Tuya (bool, value, enum, bitmap, string, raw , etc.),
le mapping des DP  vers des capabilities Homey ,
la logique multi-gang/multi-endpoints pour les interrupteurs,
et les variations de structure entre appareils (puisque Tuya ne suit pas 100% sa propre spec‚Ä¶).
Et effectivement, ce n‚Äôest pas trivial, car les donn√©es ne sont pas toujours envoy√©es au m√™me format : selon le
fabricant, un m√™me DP  peut arriver en string ou en binaire (raw), ce qui oblige √† traiter plusieurs cas et √† adapter
dynamiquement.
Concernant la page que tu as partag√©e :
https://developer .tuya.com/en/ docs/connect-subdevices-to- gateways/tuya-zigbee-multiple- switch-access-standard?id=
K9ik6zvnqr09m
Je me suis aid√© de la discussion ici pour le parseur :
https://github.com/zigpy/ zigpy/discussions/823
Oui, je la connais. Elle donne la structure globale du TuyaMCU (format DP , commandes, retour d‚Äô√©tat, multi-switch,
etc.), mais je suis d‚Äôaccord avec toi : il manque cruellement d‚Äôexemples concrets ‚Äì surtout pour les sc√©narios r√©els
comme :
la gestion des multi-gang / multi-endpoints,
la synchronisation d‚Äô√©tat,
la conversion DP  ‚Üî clusters Zigbee standard,
les cas o√π le fabricant change la num√©rotation des DP  ou les types.
C‚Äôest d‚Äôailleurs pour combler ces zones floues que j‚Äôai d√ª analyser des logs, snif fer du trafic Zigbee et tester plusieurs
appareils, afin de d√©duire la logique r√©elle appliqu√©e par Tuya.
Si √ßa peut t‚Äôaider √† mieux comprendre, tu peux jeter un ≈ìil √† ce que j‚Äôai d√©j√† int√©gr√© dans mon repo ‚Äî tu y trouveras
du code concret couvrant la majorit√© des cas que la documentation n‚Äôexplique pas.
---
Si tu veux, je peux aussi te fournir :
üîπ un sch√©ma visuel du cycle complet (DP  ‚Üí parsing ‚Üí mapping ‚Üí capability)
üîπ un exemple pas-√†-pas pour un switch 2-gang (avec logs et explication du parsing)
Souhaites-tu que je te pr√©pare √ßa ?
[Texte des messages pr√©c√©dents masqu√©]
Lo√Øc Salmona <loic.salmona@gmail.com> 2 novembre 2025 √† 15:01
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
Dans mes logs, il y a ce test. 
Est ce qu‚Äôil d√©termine l‚Äôutilisation ou non de ta surcouche DP  ?
Peut √™tre que le test n‚Äôest pas bon pour mon device (il consid√®re que ce n‚Äôest pas √† Tuya device) et qu‚Äôon retombe
dans le standard zigbee qui n‚Äôest pas adapt√© ???
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 2 novembre 2025 √† 16:18
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
Je catch tout et je regarde la donn√© derri√®re .
Oui c'est bien √ßa je v√©rifie si c'est du tuya et apr√®s √ßa bascule en ZIGBEE natif.
Mais visiblement il n'arrive pas a capturer le cluster . C'est dans ce cluster qui il ya les donn√©es data point .
Peut √™tre que ton appareil est en ZIGBEE natif .
Et quand tu interview l'appareil dans https://tools.developer .homey .app/tools/zigbee
√áa donne quoi ?


Cluster 0xEF00
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 2 novembre 2025 √† 16:19
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
Renvoi moi aussi tes logs que je regarde de plus pr√™t dans un txt ou rfc ou autre stp
Homey app run > logs.txt 
[Texte des messages pr√©c√©dents masqu√©]
Lo√Øc Salmona <loic.salmona@gmail.com> 3 novembre 2025 √† 13:00
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
Salut,
Voici l'interview report et les logs en pj.
J'ai l'impression que le device n'est pas Tuya, contrairement √† ce que m'a redit le constructeur . Donc ton driver
basculerait en mode zigbee natif...
Alors, chose incroyable et reproductible: suite √† la g√©n√©ration de l'interview report, les deux boutons ne sont mis
√† fonctionner de mani√®re s√©par√©e.  Donc l'interrupteur fonctionne totalement !!!
J'ai r√©essay√© avec un autre interrupteur 2 boutons. M√™me comportement: √† l'int√©gration, il y a le probl√®me de
l'activation simultan√©e des 2 boutons. Et apr√®s interview report, les deux boutons se mettent √† fonctionner
s√©par√©ment ! C'est incroyable. tu as d√©j√† vu √ßa ???
[Texte des messages pr√©c√©dents masqu√©]
2 pi√®ces jointes
Bseed 2gang switch interview report.rtf
15K
logs (1).rtf
64K
Lo√Øc Salmona <loic.salmona@gmail.com> 3 novembre 2025 √† 13:01
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
Je viens de recevoir un interrupteur Bseed 3 boutons et un interrupteur Bseed volets roulants.
Je vais essayer de les int√©grer . Je te tiens au courant
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 3 novembre 2025 √† 13:03
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
Oui c'est normal on appelle √ßa le mode iddle et c'est compliqu√© a catcher ducoup j'ai mis un listener en background
pour catcher ces event. 
Oui j'ai d√©j√† vue √ßa mais pas les 2 en m√™me temps qui semble un bug firmware du constructeur . 
[Texte des messages pr√©c√©dents masqu√©]
Lo√Øc Salmona <loic.salmona@gmail.com> 3 novembre 2025 √† 13:20
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
Je n'ai pas tout compris.
En tout cas, une fois install√© + manip interview report, le fonctionnement a l'air stable.
M√™me apr√®s recompile et red√©ploiement de l'app, les devices fonctionnent toujours.
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 3 novembre 2025 √† 13:38
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
Bah c'est surment un big qui s'est fix, en sortant du mode iddle par le scan interview 
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 3 novembre 2025 √† 13:50
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
J'ai mis a jours le projet avec dans le dossier lib une meilleure gestion des dp et de tuya et ZIGBEE 
[Texte des messages pr√©c√©dents masqu√©]
Lo√Øc Salmona <loic.salmona@gmail.com> 3 novembre 2025 √† 13:51
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
Super je vais regarder
Merci bcp!
[Texte des messages pr√©c√©dents masqu√©]
Lo√Øc Salmona <loic.salmona@gmail.com> 3 novembre 2025 √† 14:31
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
L‚Äôinterrupteur 3 boutons fonctionne avec la m√™me astuce.
Pour int√©grer un volet roulant, c‚Äôest ‚Äòcurtain_motor ‚Äô pour ajouter le device  ?
[Texte des messages pr√©c√©dents masqu√©]
Dylan Rajasekaram <senetmarne@gmail.com> 3 novembre 2025 √† 17:52
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
Curtain motor correspond a volet roulant oui 
Peut √™tre que ton manufacturer name est deja dedans .
[Texte des messages pr√©c√©dents masqu√©]
Lo√Øc Salmona <loic.salmona@gmail.com> 3 novembre 2025 √† 17:54
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
Merci.
Non, j‚Äôai du l‚Äôajouter . Pour l‚Äôinstant √ßa ne marche pas. J‚Äôinvestisse :)
[Texte des messages pr√©c√©dents masqu√©]
Lo√Øc Salmona <loic.salmona@gmail.com> 4 novembre 2025 √† 00:16
√Ä : Dylan Rajasekaram <senetmarne@gmail.com>
Salut,
Je t'ennuie encore, c'est mon dernier device √† tester avant d'√©quiper ma maison avec cette gamme Bseed.
tu as d√©j√† test√© le curtain motor? J'ai ajout√© mon device dans app.json et le driver .compose.json du Curtain Motor
Advanced.
Mais il n'y a aucun listener / capability qui se cr√©ent dans les logs.
Et rien ne fonctionne ni dans un sens, ni dans l'autre. 
Tu aurais une id√©e?
[Texte des messages pr√©c√©dents masqu√©]
2 pi√®ces jointes
logs curtain motor .rtf
22K
curtain motor interview report.rtf
9K
Dylan Rajasekaram <senetmarne@gmail.com> 4 novembre 2025 √† 00:22
√Ä : Lo√Øc Salmona <loic.salmona@gmail.com>
Je vais regarder . 
[Texte des messages pr√©c√©dents masqu√©]
