Write-Host "ğŸ” TEST VALIDATION HOMEY" -ForegroundColor Green
Write-Host "=========================" -ForegroundColor Green

Write-Host "`nğŸ“‚ VÃ©rification de app.json..." -ForegroundColor Yellow
if (Test-Path "app.json") {
    Write-Host "âœ… app.json trouvÃ©" -ForegroundColor Green
    
    # VÃ©rifier la taille
    $size = (Get-Item "app.json").Length
    Write-Host "ğŸ“Š Taille: $size bytes" -ForegroundColor Cyan
    
    # VÃ©rifier le contenu des clusters
    $content = Get-Content "app.json" -Raw
    if ($content -match '"clusters":\s*\[[^\]]*\]') {
        Write-Host "âœ… Section clusters trouvÃ©e" -ForegroundColor Green
        
        # VÃ©rifier si les clusters sont numÃ©riques
        if ($content -match '"clusters":\s*\[\s*\d+') {
            Write-Host "âœ… Clusters numÃ©riques dÃ©tectÃ©s" -ForegroundColor Green
        } else {
            Write-Host "âŒ Clusters non numÃ©riques dÃ©tectÃ©s" -ForegroundColor Red
        }
    } else {
        Write-Host "âŒ Section clusters non trouvÃ©e" -ForegroundColor Red
    }
} else {
    Write-Host "âŒ app.json non trouvÃ©" -ForegroundColor Red
}

Write-Host "`nğŸš€ Test de validation Homey..." -ForegroundColor Yellow
try {
    $result = homey app validate 2>&1
    Write-Host "âœ… Validation terminÃ©e" -ForegroundColor Green
    Write-Host "ğŸ“‹ RÃ©sultat:" -ForegroundColor Cyan
    Write-Host $result
} catch {
    Write-Host "âŒ Erreur de validation: $($_.Exception.Message)" -ForegroundColor Red
}

Write-Host "`nğŸ¯ Test terminÃ©" -ForegroundColor Green
