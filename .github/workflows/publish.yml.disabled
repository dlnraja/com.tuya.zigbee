name: Homey App Publish

on:
  release:
    types: [published]
  workflow_dispatch:

jobs:
  publish:
    name: Publish to Homey App Store
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout code
        uses: actions/checkout@v4
        
      - name: ðŸš€ Publish to Homey App Store
        uses: athombv/github-action-homey-app-publish@master
        id: publish
        with:
          personal_access_token: ${{ secrets.HOMEY_PAT }}
          
      - name: ðŸ“ Summary
        run: |
          echo "âœ… App published successfully!" >> $GITHUB_STEP_SUMMARY
          echo "ðŸ”— Manage your app at ${{ steps.publish.outputs.url }}" >> $GITHUB_STEP_SUMMARY
